{"version":3,"sources":["webpack:///../../../src/components/VGrid/VSpacer.ts","webpack:///./src/views/Dashboard/DashboardCategory.vue?7f28","webpack:///./src/views/Dashboard/DashboardCategory.vue","webpack:///./src/views/Dashboard/DashboardCategory.vue?e2c5","webpack:///./src/views/Dashboard/DashboardCategory.vue?c043"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","ref","staticStyle","data","treeOptions","on","refresh","scopedSlots","_u","key","fn","node","$event","stopPropagation","apply","arguments","model","value","callback","$$v","$set","expression","addChildNode","_v","remove","_e","addNew","_s","$t","$store","getters","loading","modified","save","staticRenderFns","dnd","JSON","stringify","$refs","tree","originalData","treeRenderer","$nextTick","commit","$logger","debug","$git","getContent","configFile","$sleep","treeReload","ret","t","obj","text","Array","isArray","children","length","tree2data","push","arr","item","i","find","a","checkDuplication","$noti","content","horizontal","vertical","type","clear","update","$confirm","title","textOk","textCancel","then","close","catch","append","expanded","expand","components","component","VBtn","VCol","VIcon","VRow","VSpacer","VTextField"],"mappings":"kHAAA,0BAGe,sBAAuB,SAAU,MAAhD,a,yCCHA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,QAAQ,CAACE,YAAY,QAAQ,CAACF,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,MAAM,CAAEP,EAAgB,aAAEI,EAAG,OAAO,CAACI,IAAI,OAAOC,YAAY,CAAC,SAAW,UAAUF,MAAM,CAAC,KAAOP,EAAIU,KAAK,QAAUV,EAAIW,aAAaC,GAAG,CAAC,uBAAuBZ,EAAIa,SAASC,YAAYd,EAAIe,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAAST,GACtZ,IAAIU,EAAOV,EAAIU,KACf,OAAOd,EAAG,QAAQ,CAACE,YAAY,OAAOC,MAAM,CAAC,MAAQ,WAAW,CAACH,EAAG,eAAe,CAACE,YAAY,cAAcC,MAAM,CAAC,MAAQ,kBAAkB,KAAO,GAAG,eAAe,GAAG,QAAU,GAAG,mBAAmB,eAAeK,GAAG,CAAC,MAAQZ,EAAIa,QAAQ,MAAQ,SAASM,GAAiC,OAAzBA,EAAOC,kBAAyB,aAAiBC,MAAM,KAAMC,aAAaC,MAAM,CAACC,MAAON,EAAS,KAAEO,SAAS,SAAUC,GAAM1B,EAAI2B,KAAKT,EAAM,OAAQQ,IAAME,WAAW,eAAexB,EAAG,YAAYA,EAAG,QAAQ,CAACE,YAAY,OAAOC,MAAM,CAAC,UAAY,GAAG,MAAQ,iBAAiB,KAAO,IAAIK,GAAG,CAAC,MAAQ,SAASO,GAAiC,OAAzBA,EAAOC,kBAAyBpB,EAAI6B,aAAaX,MAAS,CAACd,EAAG,SAAS,CAACJ,EAAI8B,GAAG,eAAe,GAAG1B,EAAG,QAAQ,CAACE,YAAY,OAAOC,MAAM,CAAC,UAAY,GAAG,MAAQ,eAAe,KAAO,IAAIK,GAAG,CAAC,MAAQ,SAASO,GAAiC,OAAzBA,EAAOC,kBAAyBpB,EAAI+B,OAAOb,MAAS,CAACd,EAAG,SAAS,CAACJ,EAAI8B,GAAG,iBAAiB,IAAI,MAAM,MAAK,EAAM,cAAc9B,EAAIgC,MAAM,GAAG5B,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,MAAM,CAACH,EAAG,QAAQ,CAACE,YAAY,QAAQ,CAACF,EAAG,QAAQ,CAACE,YAAY,OAAOC,MAAM,CAAC,KAAO,OAAO,CAACH,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,GAAG,UAAY,GAAG,MAAQ,GAAG,KAAO,GAAG,KAAO,GAAG,MAAQ,iBAAiB,MAAQ,IAAIK,GAAG,CAAC,MAAQZ,EAAIiC,SAAS,CAACjC,EAAI8B,GAAG,IAAI9B,EAAIkC,GAAGlC,EAAImC,GAAG,0BAA4B,IAAMnC,EAAImC,GAAG,QAAQ,QAAQ,IAAI,GAAG/B,EAAG,QAAQ,CAACE,YAAY,QAAQ,CAACF,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,OAAO,CAACH,EAAG,QAAQ,CAACG,MAAM,CAAC,SAAWP,EAAIoC,OAAOC,QAAQC,UAAYtC,EAAIuC,SAAS,KAAOvC,EAAIuC,SAAS,QAAUvC,EAAIoC,OAAOC,QAAQC,QAAQ,UAAY,GAAG,KAAO,GAAG,KAAO,GAAG,MAAQ,GAAG,MAAQ,GAAG,MAAQ,mBAAmB1B,GAAG,CAAC,MAAQZ,EAAIwC,OAAO,CAACxC,EAAI8B,GAAG,IAAI9B,EAAIkC,GAAGlC,EAAImC,GAAG,SAAS,QAAQ,IAAI,IAAI,IAAI,IAAI,IACpmDM,EAAkB,G,gLCqFD,EAArB,mQAE2B,CACzBC,KAAK,IAHP,wCAK2B,IAL3B,gDAMmC,IANnC,8CAOsC,mBAPtC,iDAQgC,GARhC,4CAUC,WACC,OAAOC,KAAKC,UAAU3C,KAAKS,KAAM,KAAM,QAXzC,gBAcC,WACC,OAAOT,KAAK4C,MAAMC,OAfpB,oBAkBC,WAEC,OAAOH,KAAKC,UAAU3C,KAAKS,QAAUiC,KAAKC,UAAU3C,KAAK8C,gBApB3D,wBAuBQ,WAAU,WAChB9C,KAAK+C,cAAe,EACpB/C,KAAKgD,WAAU,WACd,EAAKD,cAAe,OA1BvB,8EA8BQ,8FACN/C,KAAKmC,OAAOc,OAAO,WAAW,GAC9BjD,KAAKkD,QAAQC,MAAM,MAAO,6BAFpB,uBAOEnD,KAAKoD,KAAKC,WAAuBrD,KAAKsD,WAAY,QAPpD,UAKLtD,KAAK8C,aACJ9C,KAAKS,KAND,QAQAT,KAAK8C,aARL,oEAWC9C,KAAKuD,OAAO,KAXb,+BAaNvD,KAAKwD,aACLxD,KAAKmC,OAAOc,OAAO,WAAW,GAdxB,iDA9BR,gFA+CQ,SAAUJ,GAChB,IAD2B,EACrBY,EAAa,GADQ,iBAEVZ,GAFU,IAE3B,2BAAwB,KAAZa,EAAY,QACjBC,EAAW,CAChBC,KAAMF,EAAEjD,KAAKmD,MAETC,MAAMC,QAAQJ,EAAEK,WAAaL,EAAEK,SAASC,OAAS,IACrDL,EAAII,SAAW/D,KAAKiE,UAAUP,EAAEK,WAEjCN,EAAIS,KAAKP,IATiB,8BAW3B,OAAOF,IA1DT,8BA6DQ,SAAiBhD,GAA+B,aAAlB0D,EAAkB,uDAAF,GAAE,iBAClC1D,GADkC,yBAC1C2D,EAD0C,QAE/CC,EAAIF,EAAIG,MAAK,SAACC,GAAD,OAAOA,IAAMH,EAAKR,QACrC,GAAKS,EACJ,UAAO,GAGR,GADAF,EAAID,KAAKE,EAAKR,MACTC,MAAMC,QAAQM,EAAKL,WAAaK,EAAKL,SAASC,OAAS,EAAI,CAC/D,IAAMP,EAAM,EAAKe,iBAAiBJ,EAAKL,SAAUI,GACjD,IAAa,IAARV,EACJ,UAAO,KATV,2BAA2B,uDAD2B,8BActD,OAAO,IA3ET,2EA8EQ,iGACNzD,KAAKmC,OAAOc,OAAO,WAAW,GAC9BjD,KAAKY,UAECZ,KAAKwE,iBAAiBxE,KAAKS,MAJ3B,uBAKLT,KAAKyE,MAAM,CACVC,QAAS1E,KAAKkC,GAAG,iCACjByC,WAAY,QACZC,SAAU,MACVC,KAAM,UAEP7E,KAAKmC,OAAOc,OAAO,WAAW,GAXzB,iCAeNjD,KAAK8C,aAAe9C,KAAKS,KAfnB,SAgBAT,KAAKoD,KAAK0B,QAhBV,wBAiBA9E,KAAKoD,KAAK2B,OAAO/E,KAAKsD,WAAYZ,KAAKC,UAAU3C,KAAKS,KAAM,KAAM,OAjBlE,yBAkBAT,KAAKoD,KAAKH,OAAV,kBAA4BjD,KAAKsD,aAlBjC,QAmBNtD,KAAKmC,OAAOc,OAAO,WAAW,GAnBxB,iDA9ER,6EAoGQ,SAAOhC,GAAS,WACtBjB,KAAKgF,SAAS,CACbH,KAAM,UACNI,MAAOjF,KAAKkC,GAAG,6BACfwC,QAAS1E,KAAKkC,GAAG,mCACjBgD,OAAQlF,KAAKkC,GAAG,OAChBiD,WAAYnF,KAAKkC,GAAG,QAClBkD,MAAK,SAACC,GACRpE,EAAKa,SACL,EAAKlB,UACLyE,OACEC,OAAM,SAACD,GAAD,OAAWA,SA/GtB,0BAkHQ,SAAapE,GACnBA,EAAKsE,OAAOvF,KAAKkC,GAAG,2BACdjB,EAAKuE,YACVvE,EAAKwE,SAENzF,KAAKY,YAvHP,oBA0HQ,WACNZ,KAAK6C,KAAK0C,OAAO,CAAE3B,KAAM5D,KAAKkC,GAAG,4BACjClC,KAAKY,YA5HP,qBA+HS,WACP,IAAQiC,EAAS7C,KAAK6C,KAAdA,KACFvB,EAAQuB,EAAKvB,MACnBtB,KAAKS,KAAOT,KAAKiE,UAAU3C,OAlI7B,GAA+C,eAAO,SAAjC,EAAiB,yBAJrC,eAAU,CACVoE,WAAY,MAGQ,WCxFyY,I,yGCO1ZC,EAAY,eACd,EACA7F,EACA0C,GACA,EACA,KACA,KACA,MAIa,aAAAmD,EAAiB,QAUhC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,OAAA,KAAKC,QAAA,KAAMC,OAAA,KAAKC,UAAA,KAAQC,aAAA","file":"chunk/chunk-608ed903.js","sourcesContent":["import './_grid.sass'\nimport { createSimpleFunctional } from '../../util/helpers'\n\nexport default createSimpleFunctional('spacer', 'div', 'v-spacer')\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-100\"},[_c('v-row',{staticClass:\"ma-0\"},[_c('v-col',{attrs:{\"cols\":\"8\"}},[(_vm.treeRenderer)?_c('tree',{ref:\"tree\",staticStyle:{\"overflow\":\"hidden\"},attrs:{\"data\":_vm.data,\"options\":_vm.treeOptions},on:{\"node:dragging:finish\":_vm.refresh},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nreturn _c('v-row',{staticClass:\"ma-0\",attrs:{\"align\":\"center\"}},[_c('v-text-field',{staticClass:\"pt-0 custom\",attrs:{\"color\":\"indigo darken-3\",\"flat\":\"\",\"hide-details\":\"\",\"rounded\":\"\",\"background-color\":\"transparent\"},on:{\"input\":_vm.refresh,\"click\":function($event){$event.stopPropagation();return (function () {}).apply(null, arguments)}},model:{value:(node.text),callback:function ($$v) {_vm.$set(node, \"text\", $$v)},expression:\"node.text\"}}),_c('v-spacer'),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"depressed\":\"\",\"color\":\"green darken-1\",\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addChildNode(node)}}},[_c('v-icon',[_vm._v(\"mdi-plus\")])],1),_c('v-btn',{staticClass:\"ml-2\",attrs:{\"depressed\":\"\",\"color\":\"red darken-3\",\"icon\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.remove(node)}}},[_c('v-icon',[_vm._v(\"mdi-delete\")])],1)],1)}}],null,false,3389835962)}):_vm._e()],1),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-row',{staticClass:\"ma-0\"},[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-btn',{attrs:{\"dark\":\"\",\"depressed\":\"\",\"block\":\"\",\"tile\":\"\",\"text\":\"\",\"color\":\"green darken-4\",\"large\":\"\"},on:{\"click\":_vm.addNew}},[_vm._v(\" \"+_vm._s(_vm.$t('dashboard.category.new') + ' ' + _vm.$t('add'))+\" \")])],1)],1),_c('v-row',{staticClass:\"ma-0\"},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-btn',{attrs:{\"disabled\":_vm.$store.getters.loading || !_vm.modified,\"dark\":_vm.modified,\"loading\":_vm.$store.getters.loading,\"depressed\":\"\",\"text\":\"\",\"tile\":\"\",\"block\":\"\",\"large\":\"\",\"color\":\"indigo darken-4\"},on:{\"click\":_vm.save}},[_vm._v(\" \"+_vm._s(_vm.$t('save'))+\" \")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins } from 'vue-property-decorator';\nimport GlobalMixins from '@/plugins/mixins';\nimport { DataTree } from '@/interface/service';\n\n@Component({\n\tcomponents: {\n\t},\n})\nexport default class DashboardCategory extends Mixins(GlobalMixins) {\n\n\tpublic treeOptions: any = {\n\t\tdnd: true,\n\t};\n\tpublic data: DataTree[] = [];\n\tpublic originalData: DataTree[] = [];\n\tpublic readonly configFile: string = 'categories.json';\n\tpublic treeRenderer: boolean = true;\n\n\tget value() {\n\t\treturn JSON.stringify(this.data, null, '\\t');\n\t}\n\n\tget tree() {\n\t\treturn this.$refs.tree as any;\n\t}\n\n\tget modified() {\n\t\t// contents deep compaire\n\t\treturn JSON.stringify(this.data) !== JSON.stringify(this.originalData);\n\t}\n\n\tpublic treeReload() {\n\t\tthis.treeRenderer = false;\n\t\tthis.$nextTick(() => {\n\t\t\tthis.treeRenderer = true;\n\t\t});\n\t}\n\n\tpublic async mounted() {\n\t\tthis.$store.commit('loading', true);\n\t\tthis.$logger.debug('app', 'DashboardCateogry mounted');\n\n\t\twhile ( true ) {\n\t\t\tthis.originalData =\n\t\t\t\tthis.data =\n\t\t\t\tawait this.$git.getContent<DataTree[]>(this.configFile, 'json') as DataTree[];\n\t\t\tif ( this.originalData ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tawait this.$sleep(1000);\n\t\t}\n\t\tthis.treeReload();\n\t\tthis.$store.commit('loading', false);\n\t}\n\n\tpublic tree2data(tree: any[]) {\n\t\tconst ret: any[] = [];\n\t\tfor ( const t of tree ) {\n\t\t\tconst obj: any = {\n\t\t\t\ttext: t.data.text,\n\t\t\t};\n\t\t\tif ( Array.isArray(t.children) && t.children.length > 0 ) {\n\t\t\t\tobj.children = this.tree2data(t.children);\n\t\t\t}\n\t\t\tret.push(obj);\n\t\t}\n\t\treturn ret;\n\t}\n\n\tpublic checkDuplication(data: any[], arr: string[] = []) {\n\t\tfor ( const item of data ) {\n\t\t\tconst i = arr.find((a) => a === item.text);\n\t\t\tif ( i ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tarr.push(item.text);\n\t\t\tif ( Array.isArray(item.children) && item.children.length > 0 ) {\n\t\t\t\tconst ret = this.checkDuplication(item.children, arr);\n\t\t\t\tif ( ret === false ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic async save() {\n\t\tthis.$store.commit('loading', true);\n\t\tthis.refresh();\n\n\t\tif ( !this.checkDuplication(this.data) ) {\n\t\t\tthis.$noti({\n\t\t\t\tcontent: this.$t('dashboard.category.duplicated'),\n\t\t\t\thorizontal: 'right',\n\t\t\t\tvertical: 'top',\n\t\t\t\ttype: 'error',\n\t\t\t});\n\t\t\tthis.$store.commit('loading', false);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.originalData = this.data;\n\t\tawait this.$git.clear();\n\t\tawait this.$git.update(this.configFile, JSON.stringify(this.data, null, '\\t'));\n\t\tawait this.$git.commit(`UPDATE: ${this.configFile}`);\n\t\tthis.$store.commit('loading', false);\n\t}\n\n\tpublic remove(node: any) {\n\t\tthis.$confirm({\n\t\t\ttype: 'warning',\n\t\t\ttitle: this.$t('dashboard.category.remove'),\n\t\t\tcontent: this.$t('dashboard.category.remove-check'),\n\t\t\ttextOk: this.$t('yes'),\n\t\t\ttextCancel: this.$t('no'),\n\t\t}).then((close) => {\n\t\t\tnode.remove();\n\t\t\tthis.refresh();\n\t\t\tclose();\n\t\t}).catch((close) => close());\n\t}\n\n\tpublic addChildNode(node: any) {\n\t\tnode.append(this.$t('dashboard.category.new'));\n\t\tif ( !node.expanded() ) {\n\t\t\tnode.expand();\n\t\t}\n\t\tthis.refresh();\n\t}\n\n\tpublic addNew() {\n\t\tthis.tree.append({ text: this.$t('dashboard.category.new') });\n\t\tthis.refresh();\n\t}\n\n\tprivate refresh() {\n\t\tconst { tree } = this.tree;\n\t\tconst model = tree.model;\n\t\tthis.data = this.tree2data(model);\n\t}\n\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardCategory.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DashboardCategory.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DashboardCategory.vue?vue&type=template&id=23cbdc82&\"\nimport script from \"./DashboardCategory.vue?vue&type=script&lang=ts&\"\nexport * from \"./DashboardCategory.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCol,VIcon,VRow,VSpacer,VTextField})\n"],"sourceRoot":""}