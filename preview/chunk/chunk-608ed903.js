(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-608ed903"],{"2fa4":function(t,e,a){"use strict";a("20f6");var r=a("80d2");e["a"]=Object(r["g"])("spacer","div","v-spacer")},abdd:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-100"},[a("v-row",{staticClass:"ma-0"},[a("v-col",{attrs:{cols:"8"}},[t.treeRenderer?a("tree",{ref:"tree",staticStyle:{overflow:"hidden"},attrs:{data:t.data,options:t.treeOptions},on:{"node:dragging:finish":t.refresh},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.node;return a("v-row",{staticClass:"ma-0",attrs:{align:"center"}},[a("v-text-field",{staticClass:"pt-0 custom",attrs:{color:"indigo darken-3",flat:"","hide-details":"",rounded:"","background-color":"transparent"},on:{input:t.refresh,click:function(t){return t.stopPropagation(),function(){}.apply(null,arguments)}},model:{value:r.text,callback:function(e){t.$set(r,"text",e)},expression:"node.text"}}),a("v-spacer"),a("v-btn",{staticClass:"ml-2",attrs:{depressed:"",color:"green darken-1",icon:""},on:{click:function(e){return e.stopPropagation(),t.addChildNode(r)}}},[a("v-icon",[t._v("mdi-plus")])],1),a("v-btn",{staticClass:"ml-2",attrs:{depressed:"",color:"red darken-3",icon:""},on:{click:function(e){return e.stopPropagation(),t.remove(r)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1)}}],null,!1,3389835962)}):t._e()],1),a("v-col",{attrs:{cols:"4"}},[a("v-row",{staticClass:"ma-0"},[a("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[a("v-btn",{attrs:{dark:"",depressed:"",block:"",tile:"",text:"",color:"green darken-4",large:""},on:{click:t.addNew}},[t._v(" "+t._s(t.$t("dashboard.category.new")+" "+t.$t("add"))+" ")])],1)],1),a("v-row",{staticClass:"ma-0"},[a("v-col",{attrs:{cols:"12"}},[a("v-btn",{attrs:{disabled:t.$store.getters.loading||!t.modified,dark:t.modified,loading:t.$store.getters.loading,depressed:"",text:"",tile:"",block:"",large:"",color:"indigo darken-4"},on:{click:t.save}},[t._v(" "+t._s(t.$t("save"))+" ")])],1)],1)],1)],1)],1)},n=[],i=a("53ca"),s=a("b85c"),o=a("1da1"),c=a("d4ec"),d=a("bee2"),l=a("257e"),u=a("262e"),h=a("2caf"),f=a("ade3"),v=(a("96cf"),a("99af"),a("7db0"),a("9ab4")),g=a("1b40"),p=a("8305"),b=function(t){Object(u["a"])(a,t);var e=Object(h["a"])(a);function a(){var t;Object(c["a"])(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n)),Object(f["a"])(Object(l["a"])(t),"treeOptions",{dnd:!0}),Object(f["a"])(Object(l["a"])(t),"data",[]),Object(f["a"])(Object(l["a"])(t),"originalData",[]),Object(f["a"])(Object(l["a"])(t),"configFile","categories.json"),Object(f["a"])(Object(l["a"])(t),"treeRenderer",!0),t}return Object(d["a"])(a,[{key:"value",get:function(){return JSON.stringify(this.data,null,"\t")}},{key:"tree",get:function(){return this.$refs.tree}},{key:"modified",get:function(){return JSON.stringify(this.data)!==JSON.stringify(this.originalData)}},{key:"treeReload",value:function(){var t=this;this.treeRenderer=!1,this.$nextTick((function(){t.treeRenderer=!0}))}},{key:"mounted",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$store.commit("loading",!0),this.$logger.debug("app","DashboardCateogry mounted");case 2:return t.next=5,this.$git.getContent(this.configFile,"json");case 5:if(this.originalData=this.data=t.sent,!this.originalData){t.next=8;break}return t.abrupt("break",12);case 8:return t.next=10,this.$sleep(1e3);case 10:t.next=2;break;case 12:this.treeReload(),this.$store.commit("loading",!1);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"tree2data",value:function(t){var e,a=[],r=Object(s["a"])(t);try{for(r.s();!(e=r.n()).done;){var n=e.value,i={text:n.data.text};Array.isArray(n.children)&&n.children.length>0&&(i.children=this.tree2data(n.children)),a.push(i)}}catch(o){r.e(o)}finally{r.f()}return a}},{key:"checkDuplication",value:function(t){var e,a=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(s["a"])(t);try{var o=function(){var t=e.value,n=r.find((function(e){return e===t.text}));if(n)return{v:!1};if(r.push(t.text),Array.isArray(t.children)&&t.children.length>0){var i=a.checkDuplication(t.children,r);if(!1===i)return{v:!1}}};for(n.s();!(e=n.n()).done;){var c=o();if("object"===Object(i["a"])(c))return c.v}}catch(d){n.e(d)}finally{n.f()}return!0}},{key:"save",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$store.commit("loading",!0),this.refresh(),this.checkDuplication(this.data)){t.next=6;break}return this.$noti({content:this.$t("dashboard.category.duplicated"),horizontal:"right",vertical:"top",type:"error"}),this.$store.commit("loading",!1),t.abrupt("return");case 6:return this.originalData=this.data,t.next=9,this.$git.clear();case 9:return t.next=11,this.$git.update(this.configFile,JSON.stringify(this.data,null,"\t"));case 11:return t.next=13,this.$git.commit("UPDATE: ".concat(this.configFile));case 13:this.$store.commit("loading",!1);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"remove",value:function(t){var e=this;this.$confirm({type:"warning",title:this.$t("dashboard.category.remove"),content:this.$t("dashboard.category.remove-check"),textOk:this.$t("yes"),textCancel:this.$t("no")}).then((function(a){t.remove(),e.refresh(),a()})).catch((function(t){return t()}))}},{key:"addChildNode",value:function(t){t.append(this.$t("dashboard.category.new")),t.expanded()||t.expand(),this.refresh()}},{key:"addNew",value:function(){this.tree.append({text:this.$t("dashboard.category.new")}),this.refresh()}},{key:"refresh",value:function(){var t=this.tree.tree,e=t.model;this.data=this.tree2data(e)}}]),a}(Object(g["b"])(p["a"]));b=Object(v["__decorate"])([Object(g["a"])({components:{}})],b);var k=b,m=k,y=a("2877"),O=a("6544"),x=a.n(O),$=a("8336"),j=a("62ad"),w=a("132d"),C=a("0fd9"),_=a("2fa4"),R=a("8654"),D=Object(y["a"])(m,r,n,!1,null,null,null);e["default"]=D.exports;x()(D,{VBtn:$["a"],VCol:j["a"],VIcon:w["a"],VRow:C["a"],VSpacer:_["a"],VTextField:R["a"]})}}]);
//# sourceMappingURL=chunk-608ed903.js.map